@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: oklch(0.95 0.05 320);
  --foreground: oklch(0.2 0.1 280);
  --card: oklch(0.98 0.03 60);
  --card-foreground: oklch(0.15 0.08 280);
  --popover: oklch(0.98 0.03 60);
  --popover-foreground: oklch(0.15 0.08 280);
  --primary: oklch(0.6 0.25 320);
  --primary-foreground: oklch(0.98 0.02 60);
  --secondary: oklch(0.85 0.15 180);
  --secondary-foreground: oklch(0.2 0.1 280);
  --muted: oklch(0.9 0.08 60);
  --muted-foreground: oklch(0.5 0.1 280);
  --accent: oklch(0.7 0.2 40);
  --accent-foreground: oklch(0.98 0.02 60);
  --destructive: oklch(0.65 0.25 15);
  --destructive-foreground: oklch(0.98 0.02 60);
  --border: oklch(0.85 0.1 320);
  --input: oklch(0.92 0.05 320);
  --ring: oklch(0.6 0.25 320);
  --chart-1: oklch(0.7 0.25 320);
  --chart-2: oklch(0.65 0.2 180);
  --chart-3: oklch(0.6 0.25 40);
  --chart-4: oklch(0.75 0.2 280);
  --chart-5: oklch(0.8 0.15 120);
  --radius: 1.25rem;
  --sidebar: oklch(0.95 0.05 320);
  --sidebar-foreground: oklch(0.2 0.1 280);
  --sidebar-primary: oklch(0.6 0.25 320);
  --sidebar-primary-foreground: oklch(0.98 0.02 60);
  --sidebar-accent: oklch(0.85 0.15 180);
  --sidebar-accent-foreground: oklch(0.2 0.1 280);
  --sidebar-border: oklch(0.85 0.1 320);
  --sidebar-ring: oklch(0.6 0.25 320);
  --mx: 50%;
  --my: 50%;
  --s: 1;
  --o: 1;
  --tx: 0px;
  --ty: 0px;
  --rx: 0deg;
  --ry: 0deg;
  --pos: 50% 50%;
  --posx: 50%;
  --posy: 50%;
  --hyp: 0.7;
}

.dark {
  --background: oklch(0.15 0.1 280);
  --foreground: oklch(0.9 0.05 60);
  --card: oklch(0.2 0.12 280);
  --card-foreground: oklch(0.9 0.05 60);
  --popover: oklch(0.2 0.12 280);
  --popover-foreground: oklch(0.9 0.05 60);
  --primary: oklch(0.75 0.25 320);
  --primary-foreground: oklch(0.15 0.1 280);
  --secondary: oklch(0.3 0.15 180);
  --secondary-foreground: oklch(0.9 0.05 60);
  --muted: oklch(0.25 0.12 280);
  --muted-foreground: oklch(0.7 0.08 60);
  --accent: oklch(0.8 0.2 40);
  --accent-foreground: oklch(0.15 0.1 280);
  --destructive: oklch(0.7 0.25 15);
  --destructive-foreground: oklch(0.9 0.05 60);
  --border: oklch(0.3 0.15 280);
  --input: oklch(0.25 0.12 280);
  --ring: oklch(0.75 0.25 320);
  --chart-1: oklch(0.75 0.25 320);
  --chart-2: oklch(0.7 0.2 180);
  --chart-3: oklch(0.8 0.2 40);
  --chart-4: oklch(0.65 0.25 280);
  --chart-5: oklch(0.75 0.2 120);
  --sidebar: oklch(0.18 0.1 280);
  --sidebar-foreground: oklch(0.9 0.05 60);
  --sidebar-primary: oklch(0.75 0.25 320);
  --sidebar-primary-foreground: oklch(0.15 0.1 280);
  --sidebar-accent: oklch(0.3 0.15 180);
  --sidebar-accent-foreground: oklch(0.9 0.05 60);
  --sidebar-border: oklch(0.3 0.15 280);
  --sidebar-ring: oklch(0.75 0.25 320);
}

/* Tailwind v3 setup: theme tokens are configured in tailwind.config.ts */

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
    background-color: #0f0f23;
    background-image: radial-gradient(circle at 25% 25%, rgba(88, 28, 135, 0.15) 0%, transparent 50%),
      radial-gradient(circle at 75% 75%, rgba(30, 41, 59, 0.2) 0%, transparent 50%);
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }
    50% {
      transform: translateY(-10px) rotate(5deg);
    }
  }

  .animate-wiggle {
    animation: wiggle 1s ease-in-out infinite;
  }

  @keyframes wiggle {
    0%,
    100% {
      transform: rotate(-2deg);
    }
    50% {
      transform: rotate(2deg);
    }
  }

  .text-shadow-fun {
    text-shadow: 2px 2px 0px rgba(139, 69, 19, 0.2), 3px 3px 0px rgba(160, 82, 45, 0.1);
  }

  .btn-primary {
    @apply bg-slate-700 hover:bg-slate-600 text-slate-100 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 transition-all duration-200 border-2 border-slate-600;
  }

  .btn-crypto {
    @apply bg-purple-800 hover:bg-purple-700 text-purple-100 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 transition-all duration-200 rounded-xl font-bold border-2 border-purple-700;
  }

  .btn-degen {
    @apply bg-indigo-800 hover:bg-indigo-700 text-indigo-100 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 transition-all duration-200 rounded-xl font-bold border-2 border-indigo-700;
  }

  .card-lofi {
    @apply bg-slate-800/90 backdrop-blur-sm border-2 border-slate-700 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 rounded-2xl;
  }

  .input-lofi {
    @apply bg-slate-800/80 backdrop-blur-sm border-2 border-slate-700 hover:border-slate-600 focus:border-purple-600 transition-all duration-200 rounded-xl text-slate-100 placeholder:text-slate-400;
  }

  .animate-fade-in {
    animation: fadeIn 0.8s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Holographic Card Structure */
  .holo-card {
    --radius: 4.55% / 3.5%;
    z-index: calc(var(--s) * 100);
    transform: translate3d(0, 0, 0.1px);
    will-change: transform, visibility;
    transform-style: preserve-3d;
  }

  .holo-card.active {
    z-index: calc(var(--s) * 120);
  }

  .holo-card__rotator {
    --glow: #69d1e9;
    display: grid;
    perspective: 600px;
    transform-origin: center;
    will-change: transform;
    transform: rotateY(var(--rx)) rotateX(var(--ry));
    transform-style: preserve-3d;
    box-shadow: 0px 10px 20px -5px rgba(0, 0, 0, 0.5);
    border-radius: var(--radius);
    outline: none;
    transition: box-shadow 0.4s ease, outline 0.2s ease;
    position: relative;
  }

  .holo-card.active .holo-card__rotator {
    box-shadow: 0 0 10px 0px var(--glow), 0 0 10px 0px var(--glow), 0 0 30px 0px var(--glow);
  }

  .holo-card__rotator > * {
    width: 100%;
    display: grid;
    grid-area: 1 / 1;
    border-radius: var(--radius);
    image-rendering: optimizeQuality;
    transform-style: preserve-3d;
  }

  /* Holographic Shine Effects */
  .holo-card__shine {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 2;
    opacity: calc(((var(--hyp) * 0.7) + 0.2) * var(--o));
    mix-blend-mode: color-dodge;
    pointer-events: none;
    border-radius: var(--radius);
  }

  .holo-card__glare {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 3;
    opacity: 0.3;
    mix-blend-mode: soft-light;
    pointer-events: none;
    border-radius: var(--radius);
    background-image: radial-gradient(
      farthest-corner circle at var(--mx) var(--my),
      rgba(255, 255, 255, 0.8) 10%,
      rgba(255, 255, 255, 0.3) 20%,
      rgba(0, 0, 0, 0.1) 90%
    );
  }

  /* Standard Holo Effect */
  .holo-card[data-rarity="holo"] .holo-card__shine {
    --space: 5%;
    --h: 21;
    --s: 70%;
    --l: 50%;

    background-image: repeating-linear-gradient(
        90deg,
        hsl(calc(var(--h) * 0), var(--s), var(--l)) calc(var(--space) * 0),
        hsl(calc(var(--h) * 1), var(--s), var(--l)) calc(var(--space) * 1),
        hsl(calc(var(--h) * 2), var(--s), var(--l)) calc(var(--space) * 2),
        hsl(calc(var(--h) * 3), var(--s), var(--l)) calc(var(--space) * 3),
        hsl(calc(var(--h) * 4), var(--s), var(--l)) calc(var(--space) * 4),
        hsl(calc(var(--h) * 5), var(--s), var(--l)) calc(var(--space) * 5),
        hsl(calc(var(--h) * 6), var(--s), var(--l)) calc(var(--space) * 6)
      ),
      radial-gradient(
        farthest-corner circle at var(--mx) var(--my),
        rgba(230, 230, 230, 0.85) 0%,
        rgba(200, 200, 200, 0.1) 25%,
        rgb(0, 0, 0) 90%
      );

    background-blend-mode: soft-light, overlay;
    background-position: calc(((50% - var(--posx)) * 25) + 50%) center, center;
    background-size: 200% 200%, 120% 120%;

    filter: brightness(calc((var(--hyp) + 0.7) * 0.7)) contrast(2.5) saturate(1.2);
  }

  /* Rainbow Holo Effect */
  .holo-card[data-rarity="rainbow"] .holo-card__shine {
    --space: 7%;
    --angle: -20deg;

    background-image: repeating-linear-gradient(
        var(--angle),
        rgb(253, 71, 65) calc(var(--space) * 1),
        rgb(255, 243, 151) calc(var(--space) * 2),
        rgba(168, 255, 95, 1) calc(var(--space) * 3),
        rgba(131, 255, 247, 1) calc(var(--space) * 4),
        rgb(75, 198, 255) calc(var(--space) * 5),
        rgb(255, 73, 246) calc(var(--space) * 6),
        rgb(255, 56, 49) calc(var(--space) * 7)
      ),
      radial-gradient(
        farthest-corner circle at var(--mx) var(--my),
        rgba(255, 255, 255, 0.6) 5%,
        rgba(150, 150, 150, 0.3) 40%,
        rgb(0, 0, 0) 100%
      );

    background-size: 500% 500%, cover;
    background-position: 0% calc(var(--posy) * 1.5), center;
    background-blend-mode: color-burn, soft-light;

    filter: brightness(calc((var(--hyp) * 0.25) + 0.66)) contrast(2) saturate(0.95);
  }

  /* Gold Secret Effect */
  .holo-card[data-rarity="gold"] .holo-card__shine {
    --angle: 110deg;

    background-image: repeating-linear-gradient(
        var(--angle),
        rgba(89, 46, 80, 0.5) 0%,
        hsl(39, 37%, 60%) 2.5%,
        rgb(216, 183, 92) 5%,
        hsl(39, 37%, 60%) 7.5%,
        rgba(14, 21, 46, 0.5) 10%,
        rgba(14, 21, 46, 0.5) 15%
      ),
      radial-gradient(
        farthest-corner circle at var(--mx) var(--my),
        rgba(255, 215, 0, 0.8) 0%,
        rgba(255, 165, 0, 0.4) 25%,
        rgba(0, 0, 0, 0.2) 90%
      );

    background-size: 600% 600%, 200% 200%;
    background-position: var(--posx) var(--posy), center;
    background-blend-mode: color-burn, darken;

    filter: brightness(calc((var(--hyp) * 0.4) + 0.7)) contrast(3) saturate(0.66);
  }
}
